{
  "app-id": "cc.novarin.novarinlinux",
  "runtime": "org.freedesktop.Platform",
  "base":"org.winehq.Wine",
  "base-version":"stable-24.08",
  "runtime-version": "24.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "run.sh",
  "inherit-extensions": [
    "org.freedesktop.Platform.Compat.i386",
    "org.freedesktop.Platform.GL32",
    "org.winehq.Wine.gecko",
    "org.winehq.Wine.mono"
  ],
  "finish-args": [
    "--share=network",
    "--socket=x11",
    "--socket=pulseaudio",
    "--socket=wayland",
    "--allow=multiarch",
    "--filesystem=host",
    "--env=DXVK_LOG_LEVEL=none",
    "--env=WINEPREFIX=/var/data/wine-prefix",
    "--env=WINEARCH=win32",
    "--device=all",
    "--device=dri"
  ],
  "modules": [
    {
      "name": "dxvk",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/dxvk",
        "cp -r * /app/dxvk/"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/doitsujin/dxvk/releases/download/v2.3/dxvk-2.3.tar.gz",
          "sha256": "8059c06fc84a864122cc572426f780f35921eb4e3678dc337e9fd79ee5a427c0"
        }
      ]
    },
    {
      "name": "novarin-app",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dm755 cc.novarin.novarinlinux.desktop /app/share/applications/cc.novarin.novarinlinux.desktop",
        "install -Dm755 discord_game_sdk.dll /app/share/launcher/discord_game_sdk.dll",
        "install -Dm755 discord_game_sdk.so /app/share/launcher/discord_game_sdk.so",
        "install -Dm755 NovaLauncher.exe /app/share/launcher/NovaLauncher.exe",
        "install -Dm755 NovarinRPCManager.exe /app/share/launcher/NovarinRPCManager.exe",
        "install -Dm755 run.sh /app/bin/run.sh",
        "install -Dm755 cc.novarin.novarinlinux-256.png /app/share/icons/hicolor/256x256/apps/cc.novarin.novarinlinux.png",
        "install -Dm755 cc.novarin.novarinlinux-128.png /app/share/icons/hicolor/128x128/apps/cc.novarin.novarinlinux.png",
        "install -Dm755 cc.novarin.novarinlinux-64.png /app/share/icons/hicolor/64x64/apps/cc.novarin.novarinlinux.png"

      ],
      "sources": [
        {
          "type": "file",
          "path": "cc.novarin.novarinlinux.desktop"
        },
        {
          "type": "file",
          "path": "launcher/discord_game_sdk.dll"
        },
        {
          "type": "file",
          "path": "launcher/discord_game_sdk.so"
        },
        {
          "type": "file",
          "path": "launcher/NovaLauncher.exe"
        },
        {
          "type": "file",
          "path": "launcher/NovarinRPCManager.exe"
        },
        {
          "type": "file",
          "path": "run.sh"
        },
        {
          "type": "file",
          "path": "icons/cc.novarin.novarinlinux-256.png"
        },
        {
          "type": "file",
          "path": "icons/cc.novarin.novarinlinux-128.png"
        },
        {
          "type": "file",
          "path": "icons/cc.novarin.novarinlinux-64.png"
        }
      ]
    }
  ],
  "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.toolchain-i386"
  ]
}
